/*! For license information please see 6c05b3ab656a8bfc225a64b3d73a36a92f83c05e-6a87df80060a5da491fc.js.LICENSE.txt */
"use strict";(self.webpackChunkAutoGen_Studio=self.webpackChunkAutoGen_Studio||[]).push([[263],{33311:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(67294);var a=r.forwardRef((function({title:e,titleId:t,...n},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},n),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"}))})),l=n(82313);var s=r.forwardRef((function({title:e,titleId:t,...n},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},n),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"}))}));var o=r.forwardRef((function({title:e,titleId:t,...n},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},n),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))}));var i=r.forwardRef((function({title:e,titleId:t,...n},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},n),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"}))})),c=n(63430),u=n(77068),m=n(1642),d=n(15596),f=n(91160);var v=r.forwardRef((function({title:e,titleId:t,...n},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},n),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"}))}));var g=r.forwardRef((function({title:e,titleId:t,...n},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},n),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}));var p=r.forwardRef((function({title:e,titleId:t,...n},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},n),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",d:"M15.75 10.5l4.72-4.72a.75.75 0 011.28.53v11.38a.75.75 0 01-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 002.25-2.25v-9a2.25 2.25 0 00-2.25-2.25h-9A2.25 2.25 0 002.25 7.5v9a2.25 2.25 0 002.25 2.25z"}))})),h=n(89132),E=n(28893);var b=e=>{let{metadata:t}=e;const n=(0,d.RU)(),a=(t.files||[]).map(((e,t)=>r.createElement("div",{key:"metafilesrow"+t,className:"text-primary "},((e,t)=>{const a=e.extension,l=["image"].includes(e.type),s=["code"].includes(e.type),o=["pdf"].includes(e.type),i=["video"].includes(e.type),c=e.name||"unknown",u=e.path||"unknown";let m=null,d=r.createElement("div",null,"image"===e.type?r.createElement(v,{className:"h-4 mr-1 inline-block"}):r.createElement(g,{className:"h-4 mr-1 inline-block"})," ",r.createElement("span",{className:"break-all "},c)," "),f=r.createElement("div",{className:"p-2 bg-secondary rounded flex items-center justify-center   h-full"},r.createElement("div",{className:""},r.createElement("div",{style:{fontSize:"2em"},className:"  text-center mb-2"},e.extension),r.createElement("div",null,d)));return l?(m=r.createElement("div",null,r.createElement("div",{className:"mb-2"},d),r.createElement(h.S3,{src:`${n}/${u}`,className:"w-full rounded"})),f=m):i?(m=r.createElement("div",{className:"mb-2"},d,r.createElement("video",{controls:!0,className:"w-full rounded"},r.createElement("source",{src:`${n}/${u}`,type:`video/${a}`}),"Your browser does not support the video tag.")),f=r.createElement("div",{className:"   relative rounded   h-full"},r.createElement("div",{className:"absolute rounded p-2 bg-secondary top-0 "},d),r.createElement("div",{style:{minHeight:"150px"},className:"bg-secondary h-full w-full rounded  flex items-center justify-center text-primary "},r.createElement(p,{className:"h-14 w-14"})))):s?(m=r.createElement("div",{className:"h"},r.createElement("div",{className:"mb-4"},d),r.createElement(h.Rc,{url:`${n}/${u}`,className:"w-full rounded"})),f=r.createElement("div",{className:"   relative rounded   h-full"},r.createElement("div",{className:"absolute rounded p-2 bg-secondary top-0 "},d),r.createElement("div",{style:{minHeight:"150px"},className:"bg-secondary  h-full w-full rounded  flex items-center justify-center text-primary"},r.createElement(E.Z,{icon:"python",size:14})))):o?(m=r.createElement("div",{className:"h-full"},r.createElement("div",{className:"mb-4"},d),r.createElement(h.Xu,{url:`${n}/${u}`})),f=r.createElement("div",{className:"   relative rounded   h-full"},r.createElement("div",{className:"absolute rounded p-2 bg-secondary top-0 "},d),r.createElement("div",{style:{minHeight:"150px"},className:"bg-secondary h-full w-full rounded  flex items-center justify-center text-primary "},r.createElement(E.Z,{icon:"pdf",size:14})))):m=r.createElement("span",null,"Unsupported file type."),r.createElement("div",{className:"  h-full rounded"},r.createElement(h.HS,{className:"mb-1",icon:f,title:c},m))})(e)))),l=(t.messages||[]).map(((e,t)=>{var n;return r.createElement("div",{className:"borpder-b mb-2 border-dashed",key:"messagerow"+t},r.createElement(h.Rq,{title:r.createElement("div",{className:"rounded p-1 px-2 inline-block text-xs bg-secondary"},r.createElement("span",{className:"font-semibold"},e.sender)," ( to"," ",e.recipient," )"),className:"m"},r.createElement(h.OK,{data:null===(n=e.message)||void 0===n?void 0:n.content,className:"text-sm"})))})),s=a.length>0,o=l.length>0;return r.createElement("div",null,o&&r.createElement("div",{className:"rounded bg-primary p-2"},r.createElement(h.D,{open:!1,title:`Agent Messages (${l.length} message${l.length>1?"s":""}) | ${(0,d.LU)(null==t?void 0:t.time)}`},l)),s&&r.createElement("div",{className:"rounded bg-primary p-2"},r.createElement(h.D,{open:!0,title:`Results (${a.length} file${a.length>1?"s":""})`},r.createElement("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},a))))},w=n(30240);var y=e=>{let{initMessages:t,editable:n=!0}=e;const v=(0,w.F)((e=>e.session)),g=r.useRef(null),p=r.useRef(null),{user:E}=r.useContext(f.T),y=(0,d.RU)(),[x,N]=r.useState(!1),[k,S]=r.useState(""),[j,C]=r.useState({status:!0,message:"All good"}),L=(0,w.F)((e=>e.messages)),R=(0,w.F)((e=>e.setMessages)),O=(0,w.F)((e=>e.workflowConfig));let M,$;"undefined"!=typeof window&&(M=window.innerHeight,$=M-350+"px");r.useEffect((()=>{const e=(e=>null==e?void 0:e.map((e=>{let t;try{t=JSON.parse(e.metadata)}catch(n){t=e.metadata}return{text:e.content,sender:"user"===e.role?"user":"bot",metadata:t,msg_id:e.msg_id}})))(t);R(e)}),[t]);const z=d.ae.map(((e,t)=>r.createElement(c.ZP,{key:"prompt"+t,type:"primary",className:"",onClick:()=>{W(e.prompt)}}," ",e.title," "))),H=null==L?void 0:L.map(((e,t)=>{const l="user"===e.sender,s=l?"bg-accent text-white  ":"bg-light";let o=!1;var i,c,m;e.metadata&&(o=null!==e.metadata.code||(null===(i=e.metadata.images)||void 0===i?void 0:i.length)>0||(null===(c=e.metadata.files)||void 0===c?void 0:c.length)>0||(null===(m=e.metadata.scripts)||void 0===m?void 0:m.length)>0);let d=[];l&&d.push({label:r.createElement("div",{onClick:()=>{console.log("retrying"),W(e.text)}},r.createElement(a,{role:"button",title:"Retry",className:"h-4 w-4 mr-1 inline-block"}),"Retry"),key:"retrymessage"});const f=r.createElement(u.Z,{menu:{items:d},trigger:["click"],placement:"bottomRight"},r.createElement("div",{role:"button",className:"float-right ml-2 duration-100 hover:bg-secondary font-semibold px-2 pb-1  rounded"},r.createElement("span",{className:"block -mt-2  "}," ...")));return r.createElement("div",{className:`align-right ${l?"text-righpt":""}  mb-2 border-b`,key:"message"+t}," ",r.createElement("div",{className:`  ${l?"":" w-full"} inline-flex gap-2`},r.createElement("div",{className:""}," "),r.createElement("div",{className:"font-semibold text-secondary text-sm w-16"},""+(l?"USER":"AGENTS")),r.createElement("div",{className:`inline-block group relative ${l?"":" w-full "} p-2 rounded  ${s}`}," ",d.length>0&&n&&r.createElement("div",{className:" group-hover:opacity-100 opacity-0 "},f),l&&r.createElement(r.Fragment,null,r.createElement("div",{className:"inline-block"},e.text)),!l&&r.createElement("div",{className:" w-full chatbox prose dark:prose-invert text-primary rounded "},r.createElement(h.OK,{className:"text-sm",data:e.text,showCode:!1})),e.metadata&&r.createElement("div",{className:""},r.createElement(b,{metadata:e.metadata})))))}));r.useEffect((()=>{setTimeout((()=>{D()}),200)}),[L]);const _="50px";r.useEffect((()=>{!1===x&&g.current&&g.current&&(null===j||j&&!1===j.status)&&(g.current.value="",g.current.style.height=_)}),[x]),r.useEffect((()=>{if(g.current){g.current.style.height=_;const e=g.current.scrollHeight;g.current.style.height=`${e}px`}}),[k]);const D=()=>{var e;null===(e=p.current)||void 0===e||e.scroll({top:p.current.scrollHeight,behavior:"smooth"})},W=e=>{C(null);let t=Object.assign([],L);const n={text:e,sender:"user",msg_id:(0,d.M8)()};t.push(n),R(t);const r={role:"user",content:e,msg_id:n.msg_id,user_id:(null==E?void 0:E.email)||"",root_msg_id:"0",session_id:(null==v?void 0:v.id)||""},a=`${y}/messages`,l={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({message:r,flow_config:O})};N(!0),fetch(a,l).then((e=>{N(!1),200===e.status?e.json().then((e=>{if(e&&e.status){console.log("******* response received ",e);const n={text:e.message,sender:"bot",metadata:e.metadata,msg_id:e.msg_id};t.push(n),t=Object.assign([],t),R(t)}else console.log("error",e),m.ZP.error(e.message)})):(e.json().then((e=>{console.log("error",e),m.ZP.error(e.message)})),m.ZP.error("Connection error. Ensure server is up and running."))})).catch((()=>{N(!1),m.ZP.error("Connection error. Ensure server is up and running.")}))};return r.createElement("div",{className:"text-primary    relative  h-full rounded  "},r.createElement("div",{style:{zIndex:100},className:" absolute right-0  text-secondary -top-8 rounded p-2"}," ",r.createElement("div",{className:"text-xs"}," ",null==v?void 0:v.flow_config.name)),r.createElement("div",{ref:p,className:"flex h-full     flex-col rounded  scroll pr-2 overflow-auto  ",style:{minHeight:"300px",maxHeight:$}},r.createElement("div",{className:"scroll-gradient h-10"}," ",r.createElement("span",{className:"  inline-block h-6"})," "),r.createElement("div",{className:"flex-1  boder mt-4"}),!L&&null!==L&&r.createElement("div",{className:"w-full text-center boder mt-4"},r.createElement("div",null," ",r.createElement(h.F8,null)),"loading messages"),L&&0===(null==L?void 0:L.length)&&r.createElement("div",{className:"ml-2 text-sm text-secondary "},r.createElement(l.Z,{className:"inline-block h-6 mr-2"}),"No messages in the current session. Start a conversation to begin."),r.createElement("div",{className:"ml-2"}," ",H),r.createElement("div",{className:"ml-2 h-6   mb-4 mt-2   "},x&&r.createElement(h.F8,null))),n&&r.createElement("div",{className:"mt-2 p-2 absolute   bg-primary  bottom-0 w-full"},r.createElement("div",{className:"rounded p-2 shadow-lg flex mb-1  gap-2 "+(x?" opacity-50 pointer-events-none":"")},r.createElement("form",{autoComplete:"on",className:"flex-1 relative",onSubmit:e=>{e.preventDefault()}},r.createElement("textarea",{id:"queryInput",name:"queryInput",autoComplete:"on",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||g.current&&!x&&(e.preventDefault(),W(g.current.value))},onChange:e=>{S(e.target.value)},placeholder:"Write message here...",ref:g,className:"flex items-center w-full resize-none text-gray-600 bg-white p-2 ring-2 rounded-sm pl-5 pr-16",style:{maxHeight:"120px",overflowY:"auto"}}),r.createElement("div",{role:"button",style:{width:"45px",height:"35px"},title:"Send message",onClick:()=>{g.current&&!x&&W(g.current.value)},className:"absolute right-3 bottom-2 bg-accent hover:brightness-75 transition duration-300 rounded cursor-pointer flex justify-center items-center"}," ",!x&&r.createElement("div",{className:"inline-block  "},r.createElement(s,{className:"h-6 w-6 text-white "})," "),x&&r.createElement("div",{className:"inline-block   "},r.createElement(o,{className:"text-white animate-spin rounded-full h-6 w-6"})))))," ",r.createElement("div",null,r.createElement("div",{className:"mt-2 text-xs text-secondary"},"Blank slate? Try one of the example prompts below"," "),r.createElement("div",{className:"mt-2 inline-flex gap-2 flex-wrap  "+(x?"brightness-75 pointer-events-none":"")},z)),j&&!j.status&&r.createElement("div",{className:"p-2 border rounded mt-4 text-orange-500 text-sm"}," ",r.createElement(i,{className:"h-5 text-orange-500 inline-block mr-2"})," ",j.message)))}},30240:function(e,t,n){n.d(t,{F:function(){return d}});const r=e=>{let t;const n=new Set,r=(e,r)=>{const a="function"==typeof e?e(t):e;if(!Object.is(a,t)){const e=t;t=(null!=r?r:"object"!=typeof a||null===a)?a:Object.assign({},t,a),n.forEach((n=>n(t,e)))}},a=()=>t,l={setState:r,getState:a,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return t=e(r,a,l),l},a=e=>e?r(e):r;var l=n(67294),s=n(52798);const{useDebugValue:o}=l,{useSyncExternalStoreWithSelector:i}=s;let c=!1;const u=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t="function"==typeof e?a(e):e,n=(e,n)=>function(e,t=e.getState,n){n&&!c&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),c=!0);const r=i(e.subscribe,e.getState,e.getServerState||e.getState,t,n);return o(r),r}(t,e,n);return Object.assign(n,t),n},m=e=>e?u(e):u;const d=m()((e=>({workflowConfig:null,setWorkflowConfig:t=>e({workflowConfig:t}),messages:null,setMessages:t=>e({messages:t}),session:null,setSession:t=>e({session:t}),sessions:[],setSessions:t=>e({sessions:t})})))},53250:function(e,t,n){var r=n(67294);var a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},l=r.useState,s=r.useEffect,o=r.useLayoutEffect,i=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!a(e,n)}catch(r){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=l({inst:{value:n,getSnapshot:t}}),a=r[0].inst,u=r[1];return o((function(){a.value=n,a.getSnapshot=t,c(a)&&u({inst:a})}),[e,n,t]),s((function(){return c(a)&&u({inst:a}),e((function(){c(a)&&u({inst:a})}))}),[e]),i(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},50139:function(e,t,n){var r=n(67294),a=n(61688);var l="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=a.useSyncExternalStore,o=r.useRef,i=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,a){var m=o(null);if(null===m.current){var d={hasValue:!1,value:null};m.current=d}else d=m.current;m=c((function(){function e(e){if(!i){if(i=!0,s=e,e=r(e),void 0!==a&&d.hasValue){var t=d.value;if(a(t,e))return o=t}return o=e}if(t=o,l(s,e))return t;var n=r(e);return void 0!==a&&a(t,n)?t:(s=e,o=n)}var s,o,i=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,a]);var f=s(e,m[0],m[1]);return i((function(){d.hasValue=!0,d.value=f}),[f]),u(f),f}},61688:function(e,t,n){e.exports=n(53250)},52798:function(e,t,n){e.exports=n(50139)},51446:function(e,t,n){var r=n(67294);const a=r.forwardRef((function({title:e,titleId:t,...n},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},n),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))}));t.Z=a}}]);
//# sourceMappingURL=6c05b3ab656a8bfc225a64b3d73a36a92f83c05e-6a87df80060a5da491fc.js.map