"use strict";(self.webpackChunkAutoGen_Studio=self.webpackChunkAutoGen_Studio||[]).push([[691],{24021:function(e,t,s){s.r(t),s.d(t,{default:function(){return C}});var l=s(67294),a=s(30372),n=s(15596),r=s(33311),o=s(91160),i=s(1642),c=s(51446);var m=l.forwardRef((function({title:e,titleId:t,...s},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},s),e?l.createElement("title",{id:t},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))})),d=s(76249);var u=l.forwardRef((function({title:e,titleId:t,...s},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},s),e?l.createElement("title",{id:t},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0112 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 013 12c0-1.605.42-3.113 1.157-4.418"}))})),f=s(66247),v=s(78680),g=s(45256),w=s(63430),E=s(89132),h=s(30240),p=s(99374),x=s(71082);var b=()=>{const[e,t]=l.useState({status:!0,message:"All good"}),[s,a]=l.useState(!1),r=((0,h.F)((e=>e.workflowConfig)),(0,h.F)((e=>e.setWorkflowConfig))),{user:c}=l.useContext(o.T),m=`${(0,n.RU)()}/workflows?user_id=${null==c?void 0:c.email}`,[d,u]=l.useState([]),[f,v]=l.useState(0);return l.useEffect((()=>{c&&(t(null),a(!0),(0,n.ZV)(m,{method:"GET",headers:{"Content-Type":"application/json"}},(e=>{e&&e.status?(u(e.data),e.data.length>0&&r(e.data[0])):i.ZP.error(e.message),a(!1)}),(e=>{t(e),i.ZP.error(e.message),a(!1)})))}),[]),l.createElement("div",{className:" mb-4 relative"},l.createElement("div",{className:"text-sm mt-2 mb-2 pb-1  "}," ","Please select an agent workflow to begin."," "),l.createElement("div",{className:"relative mt-2 "},l.createElement(E.fz,{loading:s}),d&&d.length>0&&l.createElement(p.Z,{className:"w-full",value:d[f].name,onChange:e=>{v(e),r(d[e])},options:d.map(((e,t)=>({label:e.name,value:t})))}),l.createElement("div",{className:"mt-2 text-xs"}," ","View all workflows"," ",l.createElement("span",{className:"text-accent"}," ",l.createElement(x.Link,{to:"/build"},"here"))," ")),!d||d&&0===d.length&&l.createElement("div",{className:"p-1 border rounded text-xs px-2 text-secondary"}," ","No agent workflows found."))};var N=e=>{let{}=e;const[t,s]=l.useState(!1),[a,r]=l.useState({status:!0,message:"All good"}),{user:c}=l.useContext(o.T),m=(0,n.RU)(),p=`${m}/sessions?user_id=${null==c?void 0:c.email}`,x=`${m}/sessions`,N=`${m}/sessions/publish`,k=`${m}/sessions/delete`,y=(0,h.F)((e=>e.sessions)),C=(0,h.F)((e=>e.workflowConfig)),Z=(0,h.F)((e=>e.setSessions)),S=(0,h.F)((e=>e.session)),P=(0,h.F)((e=>e.setSession)),_=(0,h.F)((e=>e.setWorkflowConfig)),[L,j]=l.useState(!1);l.useEffect((()=>{if(y&&y.length>0){const e=y[0];P(e),_(null==e?void 0:e.flow_config)}else P(null)}),[y]);l.useEffect((()=>{c&&(r(null),s(!0),(0,n.ZV)(p,{method:"GET",headers:{"Content-Type":"application/json"}},(e=>{e&&e.status?Z(e.data):i.ZP.error(e.message),s(!1)}),(e=>{r(e),i.ZP.error(e.message),s(!1)})))}),[]);const T=y.map(((e,t)=>{const a=(null==S?void 0:S.id)===e.id?"bg-accent text-white":"bg-secondary text-primary";return l.createElement("div",{key:"sessionsrow"+t,className:"  mb-2 pb-1  border-b border-dashed "},l.createElement("div",{className:`rounded p-2 cursor-pointer ${a}`,role:"button",onClick:()=>{P(e),_(e.flow_config)}},l.createElement("div",{className:"text-xs"},(0,n.aF)(e.id,27)),l.createElement("div",{className:"text-xs"},e.flow_config.name),l.createElement("div",{className:"text-xs text-right "},(0,n.Sy)(e.timestamp)," ")),l.createElement("div",{className:"flex mt-2 text-secondary"},l.createElement("div",{className:"flex-1"}),l.createElement("div",{role:"button",onClick:()=>{(e=>{r(null),s(!0);const t={method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:null==c?void 0:c.email,session:e})};(0,n.ZV)(k,t,(e=>{e&&e.status?(i.ZP.success(e.message),Z(e.data),e.data&&e.data.length>0&&P(e.data[0])):i.ZP.error(e.message),s(!1)}),(e=>{r(e),i.ZP.error(e.message),s(!1)}))})(e)},className:"text-xs px-2  hover:text-accent cursor-pointer"},l.createElement(d.Z,{className:"w-4 h-4 inline-block mr-1 "}),"delete"," "),l.createElement("div",{role:"button",onClick:()=>{(()=>{r(null),s(!0);const e={user_id:null==c?void 0:c.email,session:S,tags:["published"]},t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};(0,n.ZV)(N,t,(e=>{e&&e.status?i.ZP.success(e.message):i.ZP.error(e.message),s(!1)}),(e=>{r(e),i.ZP.error(e.message),s(!1)}))})()},className:"text-xs px-2  hover:text-accent cursor-pointer"},l.createElement(u,{className:"w-4 h-4 inline-block mr-1 "}),"publish"," ")))}));let F,$;return"undefined"!=typeof window&&(F=window.innerHeight,$=F-400+"px"),l.createElement("div",{className:"  "},l.createElement(g.Z,{title:l.createElement("div",{className:"font-semibold mb-2 pb-1 border-b"},l.createElement(f.Z,{className:"h-5 w-5 inline-block mr-1"}),"New Sessions"," "),open:L,footer:[l.createElement(w.ZP,{key:"back",onClick:()=>{j(!1)}},"Cancel"),l.createElement(w.ZP,{key:"submit",type:"primary",disabled:!C,onClick:()=>{j(!1),(()=>{r(null),s(!0);const e={user_id:null==c?void 0:c.email,session:{user_id:null==c?void 0:c.email,flow_config:C,session_id:null}},t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};console.log("createSession",t),(0,n.ZV)(x,t,(e=>{var t;e&&e.status?(i.ZP.success(e.message),Z(e.data),_(null===(t=e.data[0])||void 0===t?void 0:t.workflow_config)):i.ZP.error(e.message),s(!1)}),(e=>{r(e),i.ZP.error(e.message),s(!1)}))})()}},"Create")]},l.createElement(b,null)),l.createElement("div",{className:"mb-2 relative"},l.createElement("div",{className:""},l.createElement("div",{className:"font-semibold mb-2 pb-1 border-b"},l.createElement(f.Z,{className:"h-5 w-5 inline-block mr-1"}),"Sessions"," "),y&&y.length>0&&l.createElement("div",{className:"text-xs mb-2 pb-1  "}," ","Create a new session or select an existing session to view chat."),l.createElement("div",{style:{maxHeight:"300px"},className:"mb-4 overflow-y-scroll scroll rounded relative "},l.createElement(E.fz,{loading:t}),T),(!y||0==y.length)&&!t&&l.createElement("div",{className:"text-xs text-gray-500"},"No sessions found. Create a new session to get started.")),l.createElement("div",{className:"flex gap-x-2"},l.createElement("div",{className:"flex-1"}),l.createElement(E.Cw,{className:"text-sm p-2 px-3",onClick:()=>{var e;y&&y.length>0?_(null===(e=y[0])||void 0===e?void 0:e.flow_config):_(null);j(!0)}}," ",l.createElement(v.Z,{className:"w-5 h-5 inline-block mr-1"}),"New"))))};var k=()=>{const[e,t]=l.useState(!0),s=e?"270px":"50px";let a,n;"undefined"!=typeof window&&(a=window.innerHeight,n=a-180+"px");(0,h.F)((e=>e.workflowConfig));return l.createElement("div",{style:{minWidth:s,maxWidth:s,height:"calc(100vh - 190px)"},className:"    "},l.createElement("div",{className:" transition overflow-hidden duration-300  flex flex-col   h-full p-2 overflow-y-scroll scroll rounded "},l.createElement("div",{className:(e?"":"hidden")+"  "},l.createElement(N,null))),l.createElement("div",{onClick:()=>t(!e),role:"button",className:" hover:text-accent duration-150  "},e?l.createElement("div",{className:"mt-4  "}," ",l.createElement(c.Z,{className:"w-6 h-6  inline-block    rounded"})," ",l.createElement("span",{className:"text-xs "}," close sidebar")):l.createElement(m,{className:"w-6 h-6   inline-block   font-bold rounded "})))};var y=()=>{const e=(0,h.F)((e=>e.session)),[t,s]=l.useState(!1),[a,c]=l.useState(null),[m,d]=l.useState("default"),[u,f]=l.useState(null);l.useEffect((()=>{(0,n.qQ)("ara_config",u)}),[u]);const[v,g]=l.useState({status:!0,message:"All good"}),{user:w}=l.useContext(o.T),E=`${(0,n.RU)()}/messages?user_id=${null==w?void 0:w.email}&session_id=${null==e?void 0:e.id}`,p=(0,h.F)((e=>e.workflowConfig));return l.useEffect((()=>{w&&e&&(g(null),s(!0),c(null),(0,n.ZV)(E,{method:"GET",headers:{"Content-Type":"application/json"}},(e=>{e&&e.status?c(e.data):i.ZP.error(e.message),s(!1)}),(e=>{g(e),i.ZP.error(e.message),s(!1)})))}),[e]),l.createElement("div",{className:"h-full   "},l.createElement("div",{className:"flex h-full   "},l.createElement("div",{className:"  mr-2  rounded"},l.createElement(k,null)),l.createElement("div",{className:" flex-1  "},!e&&l.createElement("div",{className:" w-full  h-full flex items-center justify-center"},l.createElement("div",{className:"w-2/3",id:"middle"},l.createElement("div",{className:"w-full   text-center"}," ",l.createElement("img",{src:"/images/svgs/welcome.svg",alt:"welcome",className:"text-accent inline-block object-cover w-56"})),l.createElement(N,null))),null!==p&&null!==e&&l.createElement(r.Z,{initMessages:a}))))};var C=e=>{let{data:t}=e;return l.createElement(a.Z,{meta:t.site.siteMetadata,title:"Home",link:"/"},l.createElement("main",{style:{height:"100%"},className:" h-full "},l.createElement(y,null)))}},66247:function(e,t,s){var l=s(67294);const a=l.forwardRef((function({title:e,titleId:t,...s},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},s),e?l.createElement("title",{id:t},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.429 9.75L2.25 12l4.179 2.25m0-4.5l5.571 3 5.571-3m-11.142 0L2.25 7.5 12 2.25l9.75 5.25-4.179 2.25m0 0L21.75 12l-4.179 2.25m0 0l4.179 2.25L12 21.75 2.25 16.5l4.179-2.25m11.142 0l-5.571 3-5.571-3"}))}));t.Z=a},76249:function(e,t,s){var l=s(67294);const a=l.forwardRef((function({title:e,titleId:t,...s},a){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},s),e?l.createElement("title",{id:t},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"}))}));t.Z=a}}]);
//# sourceMappingURL=component---src-pages-index-tsx-2342fef3effa18a4d864.js.map